### watch 命令

- **watch** 是一个非常实用的命令，基本所有的 **Linux** 发行版都带有这个命令，如同名字一样，**watch** 可以帮你监测一个命令的运行结果，省的你一遍遍的手动运行。

- 在 **Linux** 下，**watch** 是周期性的执行下个程序，并全屏显示执行结果。你可以拿它来监测你想要的一切命令的结果变化，比如 **tail** 一个 **log** 文件，**ls** 监测某个文件的大小变化；

- **命令格式** - wath [参数] [命令]

- **命令功能** - 可以将命令的输出结果输出到标准输出设备，多用于周期性执行命令/定时执行命令

- **命令参数** - 

  - **-n或--interval** ：**watch** 缺省每2秒运行一下程序，可以用 **-n** 或 **--interval** 来指定间隔的时间；
  - **-d或--differences** ：用 **-d或--deferences** 选项 **watch** 会高亮显示变化的区域；而 **-d=cumulative** 选项会把动过的地方(不关最近的那次有没有变动)都高亮显示出来；
  - **-t或-no-title** ：会关闭 **watch** 命令在顶部的时间隔间；
  - **-h，--help** ：查看帮助文档；

- **命令实例** - 

- **实例一：每隔1s高亮显示网络链接数的变化情况**

- **命令**

  ```bash
  watch -n 1 -d netstat -ant
  ```

- **说明**

  其他操作：

  退出终端：Ctrl + x

  退出watch：Ctrl + g

- **实例二：每隔1s高亮显示http链接数的变化情况**

- **命令**

  ```bash
  watch -n 1 -d 'pstree|grep http'
  ```

- **说明**

  每隔1s高亮显示http链接数的变化情况；后面接的命令若带有管道符，需要加 \" 将命令区域归整；

- **实例三：实时查看模拟攻击客户机建立起来的连接数**

- **命令**

  ```bash
  watch 'netstat -an | grep:21 |\grep <模拟攻击客户机的IP>|wc -l'
  ```

- **说明**

- **实例四：监测当前目录中 scf 的文件的变化**

- **命令**

  ```bash
  watch -d 'ls -l|grep scf'
  ```

- **说明**

- **实例五：10s一次输出系统的平均负载**

- **命令**

  ```bash
  watch -n 10 'cat /proc/loadavg'
  ```

- **输出**